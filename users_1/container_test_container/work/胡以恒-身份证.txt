原镜像构建
FROM jupyter/tensorflow-notebook

LABEL maintainer='Yiheng Hu <3091296503@qq.com>"

USER root
ENV GRANT_SUDO=yes

ENV LANG_zh_CN
ENV LC_TYPE zh_CN.UTF-8
ENV LANGUAGE zh_CN.UTF-8

ADD nbgrader /tmp/nbgrader

RUN pip install --no-cache /tmp/nbgrader && \
         pip install -i http://pypi.tina.tsinghua.edu.cn/simple jupyter_contrib_nbextensions && \
         jupyter contrib nbextension install --user && \
         jupyter nbextension install --user --py nbgrader && \
         jupyter nbextension enable --user --py nbgrader && \
         jupyter serverextension enable --user --py nbgrader && \
         jupyter nbextension disable --user course_list/main --section=tree && \
         jupyter serverextension disable --user nbgrader.server_extensions.course_list && \
         fix-permissions /home/$NB_USER

COPY nbgrader_config.py /home/jovyan/.jupyter/nbgrader_config.py

COPY custom/ /home/jovyan/.jupyter/custom/

WORKDIR /home/jovyan/work

教师镜像构建初版 docker build -t huyiheng/teacher-notebook ./
FROM jupyter/tensorflow-notebook

LABEL maintainer="Yiheng Hu <3091296503@qq.com>"

USER root
ENV GRANT_SUDO=yes

ENV LANG zh_CN
ENV LC_TYPE zh_CN.UTF-8
ENV LANGUAGE zh_CN.UTF-8

RUN pip install notebook==6.4.4 && \
    pip install nbgrader==0.6.2 && \
    pip install jupyter_nbextensions_configurator && \
    jupyter nbextensions_configurator enable --user && \
    pip install jupyter_contrib_nbextensions && \
    jupyter contrib nbextension install --user && \
    jupyter nbextension install --user --py nbgrader --overwrite && \
    jupyter nbextension enable --user --py nbgrader && \
    jupyter serverextension enable --user --py nbgrader && \
    jupyter nbextension disable --user course_list/main --section=tree && \
    jupyter serverextension disable --user nbgrader.server_extensions.course_list && \
    fix-permissions /home/$NB_USER

COPY custom/ /home/jovyan/.jupyter/custom/

WORKDIR /home/jovyan/work

学生镜像构建初版 docker build -t huyiheng/student-notebook ./
FROM huyiheng/teacher-notebook

LABEL maintainer="Yiheng Hu <3091296503@qq.com>"

USER root
ENV GRANT_SUDO=yes

RUN jupyter nbextension disable --user creat_assignment/main && \
    jupyter nbextension disable --user formgrader/main --section=tree && \
    jupyter nbextension disable --user course_list/main --section=tree && \
    jupyter serverextension disable --user nbgrader.server_extensions.formgrader && \
    jupyter serverextension disable --user nbgrader.server_extensions.course_list && \
    fix-permissions /home/$NB_USER

COPY custom/ /home/jovyan/.jupyter/custom/

WORKDIR /home/jovyan/work

jupyterhub定制
ARG JUPYTERHUB_VERSION=0.9.4
FROM jupyterhub/jupyterhub:${JUPYTERHUB_VERSION}

LABEL maintainer="Yiheng Hu <3091296503@qq.com>"

USER root
ENV GRANT_SUDO=yes

RUN jupyter nbextension disable --user creat_assignment/main && \
    jupyter nbextension disable --user formgrader/main --section=tree && \
    jupyter nbextension disable --user course_list/main --section=tree && \
    jupyter serverextension disable --user nbgrader.server_extensions.formgrader && \
    jupyter serverextension disable --user nbgrader.server_extensions.course_list && \
    fix-permissions /home/$NB_USER

COPY custom/ /home/jovyan/.jupyter/custom/

WORKDIR /home/jovyan/work

pip install jupyterhub
pip install notebook=6.4.4


上传文件后先根据要创建的容器ID在user_{user_id}文件夹下创建文件夹container_{container_id}，然后在dockerfile中写入  
COPY ./container_{container_id} .